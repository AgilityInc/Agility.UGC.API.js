"use strict";"undefined"==typeof window.Agility&&console.warn("Agility.js dependency is missing"),Agility.RegisterNamespace("Agility.UGC.API"),function(e){function a(a){return null!=e.APIUrl&&""!=e.APIUrl&&void 0!=e.APIAccessKey||(a({ResponseType:e.ResponseType.Error,Message:"The Agility UGC API has not been initialized.",ResponseData:null}),!1)}function t(e,a,t){if(void 0==a||null==a||""==a||"string"!=typeof a)return null;if(null!=e.ValidationRegEx&&""!=e.ValidationRegEx&&"Add comma separated file extensions. Eg: .pdf, .gif"!=e.ValidationRegEx)try{var i=new RegExp(e.ValidationRegEx);if(i.ignoreCase=!0,a.search(i)==-1)return null!=e.ValidationMessage&&""!=e.ValidationMessage&&"Add the file type validation message."!=e.ValidationMessage?{FieldType:e,Message:e.ValidationMessage}:{FieldType:e,Message:"The value from field "+e.Label+" did not match the validation expression requirements."}}catch(e){}}function i(e,a){if(null==a||""==a)return!0;for(a=a.replace(".*([\\",""),a=a.replace("])","");a.indexOf("]|[\\")!=-1;)a=a.replace("]|[\\",";");fileTypes=a.replace(/\./g,"*.");var t=fileTypes.split(";"),i=e.substring(e.lastIndexOf(".")).toLowerCase();i.indexOf(".")!=-1&&(i=i.substring(i.lastIndexOf(".")).toLowerCase());for(var o in t){var r=$.trim(t[o]);if(!(""==r||r.length<2||0!=r.indexOf("*"))&&(r=r.substring(1).toLowerCase(),r==i))return!0}return!1}function o(a,t,i){var o=e.APIUrl;return""==o||null==o?null:(o.lastIndexOf("/")!=o.length-1&&(o+="/"),o+=a+"/"+e.APIAccessKey+"/"+e.APISeconds+"/"+e.APIRandomNumber+"/"+e.APIHash+"/"+e.APIProfileRecordID,void 0!=t&&$.isArray(t)&&t.length>0&&jQuery.each(t,function(e,a){o+="/"+escape(a)}),o+="?method=?",void 0!=i&&""!=i&&(o+="&"+i),o)}function r(a,t,i){var o=Agility.UniqueID("postDataForm"),r=o+"_form",n=o+"_iframe",l=location.href;l=l.substring(0,l.indexOf("/",l.indexOf("//")+2)),l+=Agility.ResolveUrl("~/AgilityRedirector.htm");var s=Agility.ResolveUrl("~/AgilityRedirector.htm?empty=1");a=a.replace("?method=?","?method=post");var c='<div id="'+o+"\" style='display:inline'><form id=\""+r+'" method="post" action="'+a+'" target="'+n+'">';if("string"==typeof t)c+='<input type="text" name="postdata" />';else for(prop in t)c+='<input type="text" name="'+prop+'" />';c+='<input type="text" name="url" />',c+="</form>",c+='<iframe id="'+n+'" name="'+n+'" src="'+s+'"></iframe>',c+="</div>";var u=jQuery(document.body);jQuery(u).append(c);var d=jQuery("#"+o),p=jQuery("#"+r),v=jQuery("#"+n);if("string"==typeof t)$("input[name=postdata]",p).val(t);else for(prop in t)$("input[name="+prop+"]",p).val(t[prop]);$("input[name=url]",p).val(l),jQuery(v).load(function(){var a=window.frames[n],t=t=e.ResponseType.Error,o=a.location;if(null!=o){var r=o.href;if("1"==Agility.QueryString("empty",r))return void setTimeout(function(){p.submit()},0);t=parseInt(Agility.QueryString("ResponseType",r)),isNaN(t)&&(t=e.ResponseType.Error)}var l={ResponseType:t,Message:Agility.QueryString("Message",r),ResponseData:Agility.QueryString("ResponseData",r)};setTimeout(function(){i(l)},0),setTimeout(function(){d.empty()},0)})}function n(){var a=e.APIUrl;return a=a.substring(0,a.toLowerCase().lastIndexOf("/"))+"/Agility-UGC-API-ODATA.svc"}function l(a,t){if(void 0!=a&&null!=a&&void 0!=a.error&&null!=a.error){var i="An error occurred.";return void 0!=a.error.message&&void 0!=a.error.message.value&&(i=a.error.message.value),t({ResponseType:e.ResponseType.Error,Message:i,ResponseData:null}),!0}}e.DataType={String:0,TextBlob:1,Int:2,Double:3,DateTime:4,File:5,GUID:6,Encrypted:7,Hashed:8,Boolean:9,Dropdown:10,HTML:11,Email:12},e.RecordState={New:0,Published:1,Deleted:2,Processing:3,Declined:4,Error:5,Escalated:6,AwaitingReview:7,Draft:8,All:-1},e.Permission={Read:0,Create:1,Edit:2,Delete:3,Moderate:4,Administer:5},e.FileStorage={RelativeURL:0,BaseURL:1,EdgeURL:2},e.SortDirection={ASC:"ASC",DESC:"DESC"},e.ResponseType={OK:0,Error:1},e.FileService={AmazonS3:0,YouTube:1,Flickr:2,Image:3,Video:4,Ooyala:5,Brightcove:6},e.FileServiceState={New:0,Unprocessed:1,Processed:2,Error:3},e.RecordFlag={Spam:"Spam",Flagged:"Flagged",Illegal:"Illegal",Abuse:"Abuse"},e.AggregateTypes={Count:0,Sum:1,Average:2},e.FeedbackContentType={WCM:0,UGC:1,Custom:2},e.FeedbackSubmissionType={Like:0,Rating:1,Vote:2,ApproveDisapprove:3,Custom:4},e.SubmissionInterval={None:-1,Day:0,Hour:1,Week:2,Month:3,Minute:4,SingleSubmissionOnly:5},e.FileServiceMetaDataTypeName="JSONPFileServiceMetaData:#Agility.UGC.API.ServiceObjects",e.YouTubeMetaField={OriginalFilePath:"OriginalFilePath",VideoID:"VideoID",Description:"Description",Category:"Category",Title:"Title",Keywords:"Keywords",Private:"Private",YouTubeState:"YouTubeState",Duration:"Duration"},e.FlickrMetaField={OriginalFilePath:"OriginalFilePath",title:"title",description:"description",tags:"tags",is_public:"is_public",is_friend:"is_friend",is_family:"is_family",safety_level:"safety_level",hidden:"hidden",photo_id:"photo_id"},e.OoyalaMetaField={embedCode:"embedCode",title:"title",description:"description",status:"status"},e.SearchArg=function(){PageSize=20,RecordOffset=0,IncludeSpam=!1,IncludeFlagged=!1,IncludeIllegal=!1,State=e.RecordState.Published,SortedField="",SortDirection="",RecordTypeName=null,Search="",CacheKey=null,Columns=[],FileStorage=e.FileStorage.RelativeURL,IncludeStatistics=!1},e.CommentSearchArg=function(){CacheKey=null,OtherStates=[],State=e.RecordState.Published,FileStorage=e.FileStorage.RelativeURL,Columns=[],IgnoreAbuse=!0,IncludeFlagged=!1,IncludeIllegal=!1},e.FeedbackSearchArg=function(){ReferenceName=null,ContentType=-1,SubmissionType=-1,RelatedContentIDs=new Array,StartDate=null,EndDate=null,IsPositive=null,Action=null},e.BooleanFeedback=function(){BooleanFeedbackID=-1,FeedbackTypeID=-1,RelatedContentID=-1,ProfileRecordID=-1,ExternalProfileID=null,CreatedOn=null,IsPositive=null,ReferenceName=null,ContentType=-1,SubmissionType=-1,RequiresAuthentication=!1,SubmissionIntervalUnit=e.SubmissionInterval.None,SubmissionIntervalValue=1},e.RatingFeedback=function(){RatingFeedbackID=-1,FeedbackTypeID=-1,RelatedContentID=-1,ProfileRecordID=-1,ExternalProfileID=null,CreatedOn=null,IsPositive=null,RatingValue=0,ReferenceName=null,ContentType=-1,SubmissionType=-1,RequiresAuthentication=!1,SubmissionIntervalUnit=e.SubmissionInterval.None,SubmissionIntervalValue=1},e.Record=function(){},e.Initialized=!1,e.APIUrl="",e.OnInit=function(a,t,i,o,r,n){void 0!=a&&null!=a&&(e.APIUrl=a),e.APIAccessKey=t,e.APISeconds=i,e.APIRandomNumber=o,e.APIProfileRecordID=r,e.APIHash=n,e.Initialized=!0},e.GetAllRecordTypes=function(e){if(a(e)){var t=o("GetAllRecordTypes",null);jQuery.getJSON(t,e)}},e.GetRecordType=function(e,t){if(a(t)){var i=o("GetRecordType",[e]);jQuery.getJSON(i,t)}},e.GetRecordTypeByName=function(e,t){if(a(t)){var i=o("GetRecordTypeByName",[e]);jQuery.getJSON(i,t)}},e.SaveRecordType=function(e,t){if(a(t)){var i=Agility.JSON.encode(e),n=o("SaveRecordType",null);r(n,i,t)}},e.DeleteRecordType=function(e,t){if(a(t)){var i=o("DeleteRecordType",[e]);jQuery.getJSON(i,t)}},e.GetRecord=function(e,t,i){if($.isFunction(t)&&(i=t,t=null),a(i)){var r=null;r=null==t?o("GetRecord",[e]):o("GetRecord",[e],"fileStorage="+escape(t)),jQuery.getJSON(r,i)}},e.GetRecordHistory=function(e,t){if(a(t)){var i=o("GetRecordHistory",[e]);jQuery.getJSON(i,t)}},e.DeleteRecord=function(e,t){if(a(t)){var i=o("DeleteRecord",[e]);jQuery.getJSON(i,t)}},e.SetRecordFlag=function(e,t,i,r){if(a(r)){var n=null;null!=i&&""!=i&&(n="reason="+escape(i));var l=o("SetRecordFlag",[e,t],n);jQuery.getJSON(l,r)}},e.InsertRecordHistory=function(e,t,i){if(a(i)){var n=t,l=o("InsertRecordHistory",[e]);r(l,n,i)}},e.SetRecordState=function(e,t,i,n,l){if($.isFunction(n)&&(l=n,n=""),a(l)){void 0!=i&&null!=i||(i=""),void 0!=n&&null!=n||(n="");var s={reason:i,comment:n},c=o("SetRecordStateEx",[e,t]);r(c,s,l)}},e.SetRecordFileState=function(e,t,i,r){if(a(r)){var n=o("SetRecordFileState",[e,t,i]);jQuery.getJSON(n,r)}},e.UpdateRecordTypeAlert=function(e,t,i,r,n){if(a(n)){void 0==n&&jQuery.isFunction(r)&&(n=r,r=null);var l=null;null!=r&&""!=r&&(l="otherNotificationType="+escape(r));var s=o("UpdateRecordTypeAlert",[e,t,i],l);jQuery.getJSON(s,n)}},e.DeleteRecordTypeAlert=function(e,t,i,r,n){if(a(n)){void 0==n&&jQuery.isFunction(r)&&(n=r,r=null);var l=null;null!=r&&""!=r&&(l="otherNotificationType="+escape(r));var s=o("DeleteRecordTypeAlert",[e,t,i],l);jQuery.getJSON(s,n)}},e.GetRecordTypeAlerts=function(e,t){if(a(t)){var i=o("GetRecordTypeAlerts",[e]);jQuery.getJSON(i,t)}},e.ClearCache=function(e,t){if(a(t)){var i=o("ClearCache",[e]);jQuery.getJSON(i,t)}},e.SaveRecord=function(i,n,l){if(a(n))return null==i&&n(e.ResponseType.Error,"The record object cannot be null."),void 0==i.RecordTypeName||null==i.RecordTypeName||""==i.RecordTypeName?void n({ResponseType:e.ResponseType.Error,Message:"The RecordTypeName property cannot be null."}):void e.GetRecordTypeByName(i.RecordTypeName,function(a){if(a.ResponseType==e.ResponseType.Error)return void n(a);var s=a.ResponseData;if(void 0==s||null==s)return void n({ResponseType:e.ResponseType.Error,Message:"The Record Type "+i.RecordTypeName+" could not be found."});for(var c=[],u=0;u<s.FieldTypes.length;u++){var d=s.FieldTypes[u],p=i[d.Name];void 0!=p&&null!=p&&void 0!=p.OriginalFilePath&&(p=p.OriginalFilePath);var v=s.FieldTypes[u].Label;if(0==d.AllowNull&&(void 0!=p&&null!=p&&0!=new String(p).length||(c[c.length]={FieldType:d,Message:"The "+d.Label+" field is required."})),void 0!=p&&null!=p&&""!=p)switch(d.DataType){case e.DataType.Boolean:"true"!=new String(p).toLowerCase()&&"false"!=new String(p).toLowerCase()&&(c[c.length]={FieldType:d,Message:"Could not convert value "+p+" from field "+d.Label+" to a boolean."});break;case e.DataType.DateTime:var f=new Date(p);null==f&&(c[c.length]={FieldType:d,Message:"Could not convert value "+p+" from field "+d.Label+" to a date/time."});break;case e.DataType.Double:isNaN(parseFloat(p))&&(c[c.length]={FieldType:d,Message:"Could not convert value "+p+" from field "+d.Label+" to a number."});break;case e.DataType.Int:isNaN(parseInt(p))&&(c[c.length]={FieldType:d,Message:"Could not convert value "+p+" from field "+d.Label+" to a number."});break;case e.DataType.String:0==d.MaxLength&&p.Length>400?c[c.length]={FieldType:d,Message:"The value from field "+d.Label+" must be 400 characters or less."}:d.MaxLength>0&&p.Length>d.MaxLength&&(c[c.length]={FieldType:d,Message:"The value from field "+d.Label+" must be "+d.MaxLength+" characters or less."});var g=t(d,p,v);null!=g&&(c[c.length]=g);break;default:d.MaxLength>0&&p.Length>d.MaxLength&&(c[c.length]={FieldType:d,Message:"The value from field "+d.Label+" must be "+d.MaxLength+" characters or less."});var h=t(d,p,v);null!=h&&(c[c.length]=h)}}if(c.length>0){for(var m="",y=0;y<c.length;y++)m+=" - "+c[y].Message+"\n";return void n({ResponseType:e.ResponseType.Error,Message:m,ValidationErrors:c})}var R=Agility.JSON.encode(i);void 0!=l&&null!=l||(l="");var S=o("SaveRecord",[],"cacheKey="+escape(l));r(S,R,n)})},e.SearchRecords=function(e,t){if(a(t)){var i=Agility.JSON.encode(e),r=o("SearchRecords");r+="&s="+escape(i),jQuery.getJSON(r,t)}},e.SearchComments=function(e,t){if(a(t)){var i=Agility.JSON.encode(e),r=o("SearchComments");r+="&s="+escape(i),jQuery.getJSON(r,t)}},e.SearchCommentParentIDs=function(e,t){if(a(t)){var i=Agility.JSON.encode(e),r=o("SearchCommentParentIDs");r+="&s="+escape(i),jQuery.getJSON(r,t)}},e.GetFeedbackAggregate=function(e,t){if(a(t)){var i=Agility.JSON.encode(e),r=o("GetFeedbackAggregate");r+="&s="+escape(i),jQuery.getJSON(r,t)}},e.SaveRating=function(a,t){var i=a;i.SubmissionType=e.FeedbackSubmissionType.Rating,e.SaveRatingFeedback(i,t)},e.SaveLike=function(a,t){var i=a;i.SubmissionType=e.FeedbackSubmissionType.Like,i.IsPositive=!0,e.SaveBooleanFeedback(i,t)},e.SaveVote=function(a,t){var i=a;i.IsPositive=!0,i.SubmissionType=e.FeedbackSubmissionType.Vote,e.SaveBooleanFeedback(i,t)},e.SaveApproveDisapprove=function(a,t,i){var o=a;o.IsPositive=t,o.SubmissionType=e.FeedbackSubmissionType.ApproveDisapprove,e.SaveBooleanFeedback(o,i)},e.SaveRatingFeedback=function(t,i){if(a(i)){e.APIProfileRecordID>0&&(t.ProfileRecordID=e.APIProfileRecordID);var n=Agility.JSON.encode(t),l=o("SaveRatingFeedback",null);r(l,n,i)}},e.SaveBooleanFeedback=function(t,i){if(a(i)){e.APIProfileRecordID>0&&(t.ProfileRecordID=e.APIProfileRecordID);var n=Agility.JSON.encode(t),l=o("SaveBooleanFeedback",null);r(l,n,i)}};var s=null;e.GetSettings=function(t,i){if(a(t))if(null==s||0==i){var r=o("GetSettings",null);jQuery.getJSON(r,function(a){a.ResponseType!=e.ResponseType.OK?t(a):(s=a.ResponseData,t(a))})}else t({ResponseType:e.ResponseType.OK,ResponseData:s})},e.SaveSettings=function(e,t){if(a(t)){s=null;var i=Agility.JSON.encode(e),n=o("SaveSettings",null);r(n,i,t)}},e.GetAllSyndicationServices=function(e){if(a(e)){var t=o("GetAllSyndicationServices",null);jQuery.getJSON(t,e)}},e.DeleteSyndicationService=function(e,t){if(a(t)){var i=o("DeleteSyndicationService",[e]);jQuery.getJSON(i,t)}},e.SaveSyndicationService=function(e,t){if(a(t)){var i=Agility.JSON.encode(e),n=o("SaveSyndicationService",null);r(n,i,t)}},e.GetAllSystemAccess=function(e){if(a(e)){var t=o("GetAllSystemAccess",null);jQuery.getJSON(t,e)}},e.GetGUID=function(e){if(a(e)){var t=o("GetGUID",null);jQuery.getJSON(t,e)}},e.GetAmazonS3Signature=function(e,t){if(a(t)){var i=o("GetAmazonS3Signature",null,"policy="+escape(e));jQuery.getJSON(i,t)}},e.GetOoyalaSignature=function(e,t){if(a(t)){var i=o("GetOoyalaSignature",null,"p="+escape(e));jQuery.getJSON(i,t)}},e.DeleteFile=function(e,t){if(a(t)){var i=o("DeleteFile",null,"key="+escape(e));jQuery.getJSON(i,t)}};var c={};e.GetFileSize=function(t,i){if(a(i)){var r=o("GetFileSize",null,"key="+escape(t));void 0==c[t]?jQuery.getJSON(r,function(a){a.ResponseType==e.ResponseType.OK&&(c[t]=new Number(a.ResponseData)),i(a)}):i({ResponseType:e.ResponseType.OK,ResponseData:new Number(c[t])})}},e.TestBrightcoveAuthenticationSettings=function(a,t,i){var o=e.APIUrl.toLowerCase().replace("agility-ugc-api-jsonp.svc","TestBrightcoveAuth.ashx");if($.isFunction(t)){var r=a;i=t,o+="?accessKey="+escape(e.APIAccessKey),o+="&seconds="+escape(e.APISeconds),o+="&randomNumber="+escape(e.APIRandomNumber),o+="&hash="+escape(e.APIHash),o+="&profileRecordID="+escape(e.APIProfileRecordID),o+="&videoID="+r,o+="&method=?"}else o=e.APIUrl.toLowerCase().replace("agility-ugc-api-jsonp.svc","TestBrightcoveAuth.ashx"),o+="?readToken="+escape(a),o+="&writeToken="+escape(t),o+="&method=?";jQuery.getJSON(o,function(e){var a=!1;void 0!=e.videoIsDisabled&&1==e.videoIsDisabled&&(a=!0),i(e.valid,e.videoExists,a)})},e.TestYouTubeAuthenticationSettings=function(a,t,i,o,r){var n=e.APIUrl.toLowerCase().replace("agility-ugc-api-jsonp.svc","TestYouTubeAuth.ashx");n+="?applicationName="+escape(a),n+="&apiKey="+escape(t),n+="&username="+escape(i),n+="&password="+escape(o),n+="&method=?",jQuery.getJSON(n,r)},e.TestAmazonS3AuthenticationSettings=function(a,t,i,o){var r=e.APIUrl.toLowerCase().replace("agility-ugc-api-jsonp.svc","TestAmazonAuth.ashx");r+="?apiKey="+escape(t),r+="&bucket="+escape(a),r+="&secretKey="+escape(i),r+="&method=?",jQuery.getJSON(r,o)},e.GenerateTwitterOauthRequestToken=function(a,t,i){var o=e.APIUrl.toLowerCase().replace("agility-ugc-api-jsonp.svc","GenerateTwitterOauthRequestToken.ashx");o+="?accessKey="+escape(e.APIAccessKey),o+="&seconds="+escape(e.APISeconds),o+="&randomNumber="+escape(e.APIRandomNumber),o+="&hash="+escape(e.APIHash),o+="&profileRecordID="+escape(e.APIProfileRecordID),o+="&appkey="+escape(a),o+="&appsecret="+escape(t),o+="&method=?",jQuery.getJSON(o,i)},e.GetAmazonS3Form=function(a){if(void 0==a||null==a||"string"==typeof a)throw new Error("The Amazon S3 form parameters have not been set correctly.");var t=location.href,o=a.inputID,r=a.fieldPanel,n=(a.fieldName,null);void 0!=a.fieldType&&(n=a.fieldType),e.GetSettings(function(l){var s=null;if(l.ResponseType!=e.ResponseType.OK)return s=jQuery("<span>There was an error building the "+a.fieldName+" input: "+l.Message+"</span>"),void s.appendTo(r);var c=l.ResponseData;return null==c.AmazonS3Bucket||""==c.AmazonS3Bucket?void e.GetUGCUploadForm(a):void e.GetGUID(function(l){if(l.ResponseType!=e.ResponseType.OK)return s=jQuery("<span>There was an error building the "+a.fieldName+" input: "+l.Message+"</span>"),void s.appendTo(r);var u=l.ResponseData,d=($("#"+o).val(),Agility.UniqueID("post_AmazonFileForm")),p=d+"_form",v=d+"_fileupload",f=d+"_swfupload";void 0!=a.button_placeholder_id&&(f=a.button_placeholder_id);var g=d+"_iframe",h=Agility.GetFlashVersion();t=t.substring(0,t.indexOf("/",t.indexOf("//")+2)),t+=Agility.ResolveUrl("~/AgilityRedirector.htm");var m=Agility.ResolveUrl("~/AgilityRedirector.htm"),y=c.AmazonS3BaseUrl;if(void 0==y||null==y||""==y)return s=jQuery("The Amazon S3 Base Url settings value has not be provided."),void s.appendTo(r);y.lastIndexOf("/")!=y.length-1&&(y+="/");var R=new Date;R.setDate(R.getDate()+1);var S=R.getFullYear()+"-"+(R.getMonth()+1)+"-"+R.getDate()+"T"+R.getHours()+":"+R.getMinutes()+":"+R.getSeconds()+"."+R.getTimezoneOffset()+"Z",A="AgilityUGC/"+u,I=0,T=0;null!=n&&n.MaxLength>0&&(T=1024*n.MaxLength);var x='{ "expiration": "'+S+'", ';x+='"conditions": [  ',x+='\t{"bucket": "'+c.AmazonS3Bucket+'"}, ',x+='\t["starts-with", "$key", "'+A+'"], ',x+='\t{"acl": "public-read"}, ',x+=h<=8?'\t{"success_action_redirect": "'+t+'"}, ':'\t{"success_action_status": "201"}, ',x+='\t ["starts-with", "$Content-Type", ""], [ "starts-with", "$filename", "" ], ',T>0&&(x+=' ["content-length-range", '+I+", "+T+"], "),x+="] }";var b=(c.AmazonS3SecretKey,c.AmazonS3AccessKey);e.GetAmazonS3Signature(x,function(l){var c=l.ResponseData,u=null;if(null!=n&&void 0!=n.ValidationRegEx&&""!=n.ValidationRegEx){var d=n.ValidationRegEx;for(d=d.replace(".*([\\",""),d=d.replace("])","");d.indexOf("]|[\\")!=-1;)d=d.replace("]|[\\",";");u=d.replace(/\./g,"*.")}if(Agility.GetFlashVersion()>8&&void 0!=a.swfUploadUrl&&null!=a.swfUploadUrl){s=jQuery("<span id='"+f+"'></span>"),s.appendTo(r);var h={AWSAccessKeyId:b,policy:c.PolicyBase64,acl:"public-read",Signature:c.Signature,success_action_status:"201"};new SWFUpload({upload_url:y,file_post_name:"file",post_params:h,file_size_limit:T/1024,file_types:u,file_types_description:"Valid File Types",file_upload_limit:"0",file_queue_error_handler:function(e,t,i){jQuery("#"+a.inputID).data("uploading",!1),void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(e,t,i)},file_dialog_complete_handler:function(t,i){if(i>0){var o=this.getFile();if(null==o)return;var r=o.name,n=e.GetMIMEtype(r);this.addPostParam("Content-Type",e.GetMIMEtype(r));var l=r.replace(/[^a-zA-Z0-9-_\.]/g,"");if(""==l||0==l.lastIndexOf("."),this.addPostParam("key",A+"/"+l),void 0!=a.beforeUpload&&jQuery.isFunction(a.beforeUpload)&&0==a.beforeUpload(r,n,o.size,this))return;jQuery("#"+a.inputID).data("uploading",!0),this.startUpload()}},upload_start_handler:function(e){var a=e.name.replace(/[^a-zA-Z0-9-_\.]/g,"");if(""==a||0==a.lastIndexOf("."))return!1},upload_progress_handler:function(e,t){void 0!=a.uploadProgress&&jQuery.isFunction(a.uploadProgress)&&a.uploadProgress(e,t)},upload_success_handler:function(e,t){if(jQuery.browser.msie){var i=new ActiveXObject("Microsoft.XMLDOM");i.loadXML(t),t=i}var o=$(t).find("Key").text();if(null==o||""==o){var r=e.name.replace(/[^a-zA-Z0-9-_\.]/g,"");o=A+"/"+r}jQuery("#"+a.inputID).val(o),jQuery("#"+a.inputID).data("uploading",!1),void 0!=a.uploadComplete&&jQuery.isFunction(a.uploadComplete)&&a.uploadComplete(o,e.size)},upload_complete_handler:function(e){jQuery("#"+a.inputID).data("uploading",!1)},upload_error_handler:function(e,t,i){jQuery("#"+a.inputID).data("uploading",!1),void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(e,t,i)},swfupload_loaded_handler:function(){},button_image_url:a.uploadButtonImageUrl,button_placeholder_id:f,button_width:a.uploadButtonImageWidth,button_height:a.uploadButtonImageHeight,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_cursor:SWFUpload.CURSOR.HAND,prevent_swf_caching:!1,flash_url:a.swfUploadUrl,debug:!1})}else{var R='<form  enctype="multipart/form-data" id="'+p+'" method="post" action="'+y+'" target="'+g+'"  style="display:inline">';R+='<input type="hidden" name="key" />',R+='<input type="hidden" name="AWSAccessKeyId" />',R+='<input type="hidden" name="Content-Type" value="">',R+='<input type="hidden" name="success_action_redirect" value="'+t+'" />',R+='<input type="hidden" name="acl" value="public-read" />',R+='<input type="hidden" name="policy" value="" />',R+='<input type="hidden" name="filename" value="" />',R+='<input type="hidden" name="Signature" size="100" value="" />',R+="<input id='"+v+'\' type="file" name="file" />',R+="</form>",R+='<iframe id="'+g+'" name="'+g+'" src="'+m+"\" style='position:absolute; height:1px; width: 1px; top:-1px; left: -10000px; overflow:hidden'></iframe>",s=jQuery(R),s.appendTo(r),jQuery("input[name='AWSAccessKeyId']",s).val(b),jQuery("input[name='policy']",s).val(c.PolicyBase64),jQuery("input[name='Signature']",s).val(c.Signature);jQuery("#"+g).load(function(){jQuery("#"+v).show();var e=null;try{e=$(this.contentDocument.location)}catch(e){}try{void 0!=e&&null!=e||(e=$(this.contentWindow.location));var t=e.attr("href"),i=Agility.QueryString("key",t);if(null!=i&&""!=i){jQuery("#"+o).val(i),$("#"+o).data("uploading",!1),void 0!=a.uploadComplete&&jQuery.isFunction(a.uploadComplete)&&a.uploadComplete(i,-1)}}catch(e){$("#"+o).data("uploading",!1);var r="An error occurred while uploading.";throw T>0&&(r+=" Please ensure the file is less than "+T/1024+"kb."),void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)?(a.uploadError("",-1,r),e):(alert(r),e)}}),jQuery("input[name='file']",s).change(function(){if(r=$(this).val(),""!=r){if(null!=n)try{if(!i(r,n.ValidationRegEx))return void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(r,SWFUpload.QUEUE_ERROR.INVALID_FILETYPE,n.ValidationMessage),void $(this).val("")}catch(e){return}var t=r,r=r.replace(/[^a-zA-Z0-9-_\.]/g,"");if(""==r||0==r.lastIndexOf("."))return void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(t,SWFUpload.QUEUE_ERROR.INVALID_FILETYPE,n.ValidationMessage),void $(this).val("");jQuery("input[name='key']",s).val(A+"/"+r);var l=e.GetMIMEtype(r),c=-1;try{this.files&&this.files.length>0&&(c=this.files[0].size)}catch(e){}if(void 0!=a.beforeUpload&&jQuery.isFunction(a.beforeUpload)&&0==a.beforeUpload(r,l,c,null)){try{$(this).val("")}catch(e){}return}$("#"+o).data("uploading",!0),$("#"+p+" input[name='Content-Type']").val(l);var u=jQuery("#"+p);$(this).hide(),u.submit();try{$(this).val("")}catch(e){}}})}})})}),1!=e._liveAttachmentRemoveHandlerBound&&(e._liveAttachmentRemoveHandlerBound=!0,jQuery("form a.UploadedFileRemove").live("click",function(){if(confirm("Do you wish to delete this file?\n\nYou will not be able to recover this file, and any links to it will be broken")){var a=jQuery(this).parents("form").data("associatedFieldID"),t=jQuery(this).parent("span.UploadedFileContainer");t.html("Deleting file...");var i=jQuery("#"+a).val();e.DeleteFile(i,function(e){0!=e.ResponseType?t.html("An error occurred: "+e.Message):(t.html(""),jQuery("#"+a).val(""))})}}))},e.GetUGCUploadForm=function(a){if(void 0==a||null==a||"string"==typeof a)throw new Error("The upload form parameters have not been set correctly.");var t=location.href,o=a.inputID,r=a.fieldPanel,n=(a.fieldName,null);void 0!=a.fieldType&&(n=a.fieldType);var l=($("#"+o).val(),Agility.UniqueID("post_UGCFileForm")),s=l+"_form",c=l+"_fileupload",u=l+"_swfupload";void 0!=a.button_placeholder_id&&(u=a.button_placeholder_id);var d=l+"_iframe";Agility.GetFlashVersion();t=t.substring(0,t.indexOf("/",t.indexOf("//")+2)),t+=Agility.ResolveUrl("~/AgilityRedirector.htm");var p=Agility.ResolveUrl("~/AgilityRedirector.htm"),v=e.APIUrl;v=v.substring(0,v.toLowerCase().lastIndexOf("/"))+"/UploadFile.ashx";var f=new Date;f.setDate(f.getDate()+1);var g=(f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate()+"T"+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+"."+f.getTimezoneOffset()+"Z",0);null!=n&&n.MaxLength>0&&(g=1024*n.MaxLength);var h=null;if(null!=n&&void 0!=n.ValidationRegEx&&""!=n.ValidationRegEx){var m=n.ValidationRegEx;for(m=m.replace(".*([\\",""),m=m.replace("])","");m.indexOf("]|[\\")!=-1;)m=m.replace("]|[\\",";");h=m.replace(/\./g,"*.")}if(Agility.GetFlashVersion()>8&&void 0!=a.swfUploadUrl&&null!=a.swfUploadUrl){void 0==a.button_placeholder_id&&(html=jQuery("<span id='"+u+"'></span>"),html.appendTo(r));var y=SWFUpload.WINDOW_MODE.TRANSPARENT;void 0!=a.button_window_mode&&(y=a.button_window_mode);var R={accessKey:e.APIAccessKey,seconds:e.APISeconds,randomNumber:e.APIRandomNumber,hash:e.APIHash,profileRecordID:e.APIProfileRecordID};new SWFUpload({upload_url:v,file_post_name:"file",post_params:R,file_size_limit:g/1024,file_types:h,file_types_description:"Valid File Types",file_upload_limit:"0",file_queue_error_handler:function(e,t,i){jQuery("#"+a.inputID).data("uploading",!1),void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(e,t,i)},file_dialog_complete_handler:function(t,i){if(i>0){var o=this.getFile();if(null==o)return;var r=o.name,n=e.GetMIMEtype(r);this.addPostParam("Content-Type",e.GetMIMEtype(r));var l=r.replace(/[^a-zA-Z0-9-_\.]/g,"");if(""==l||0==l.lastIndexOf("."),void 0!=a.beforeUpload&&jQuery.isFunction(a.beforeUpload)&&0==a.beforeUpload(r,n,o.size,this))return;jQuery("#"+a.inputID).data("uploading",!0),this.startUpload()}},upload_start_handler:function(e){var a=e.name.replace(/[^a-zA-Z0-9-_\.]/g,"");if(""==a||0==a.lastIndexOf("."))return!1},upload_progress_handler:function(e,t){void 0!=a.uploadProgress&&jQuery.isFunction(a.uploadProgress)&&a.uploadProgress(e,t)},upload_success_handler:function(t,i){jQuery("#"+a.inputID).data("uploading",!1);var r=Agility.JSON.decode(i);if(r.ResponseType!=e.ResponseType.OK)void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError("",-1,r.Message);else{var n=r.ResponseData;jQuery("#"+o).val(n),void 0!=a.uploadComplete&&jQuery.isFunction(a.uploadComplete)&&a.uploadComplete(n,-1)}},upload_complete_handler:function(e){jQuery("#"+a.inputID).data("uploading",!1)},upload_error_handler:function(e,t,i){jQuery("#"+a.inputID).data("uploading",!1),void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(e,t,i)},swfupload_loaded_handler:function(){},button_image_url:a.uploadButtonImageUrl,button_placeholder_id:u,button_width:a.uploadButtonImageWidth,button_height:a.uploadButtonImageHeight,button_window_mode:y,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_cursor:SWFUpload.CURSOR.HAND,prevent_swf_caching:!1,flash_url:a.swfUploadUrl,debug:!1})}else{var S='<form  enctype="multipart/form-data" id="'+s+'" method="post" action="'+v+'" target="'+d+'"  style="display:inline">';S+='<input type="hidden" name="accessKey" />',S+='<input type="hidden" name="seconds" />',S+='<input type="hidden" name="randomNumber" />',S+='<input type="hidden" name="hash" />',S+='<input type="hidden" name="profileRecordID" />',S+='<input type="hidden" name="returnUrl" />',S+="<input id='"+c+'\' type="file" name="file" />',S+="</form>",S+='<iframe id="'+d+'" name="'+d+'" src="'+p+"\" style='position:absolute; height:1px; width: 1px; top:-1px; left: -10000px; overflow:hidden'></iframe>",html=jQuery(S),html.appendTo(r),jQuery("input[name='accessKey']",html).val(e.APIAccessKey),jQuery("input[name='seconds']",html).val(e.APISeconds),jQuery("input[name='randomNumber']",html).val(e.APIRandomNumber),jQuery("input[name='hash']",html).val(e.APIHash),jQuery("input[name='profileRecordID']",html).val(e.APIProfileRecordID),jQuery("input[name='returnUrl']",html).val(t);jQuery("#"+d).load(function(){jQuery("#"+c).show();var t=null;try{t=$(this.contentDocument.location)}catch(e){}try{void 0!=t&&null!=t||(t=$(this.contentWindow.location));var i=t.attr("href"),r=Agility.QueryString("ResponseType",i);if(null==r)return;if(r!=e.ResponseType.OK){var n=Agility.QueryString("Message",i);void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError("",-1,n)}else{var l=Agility.QueryString("ResponseData",i);jQuery("#"+o).val(l),$("#"+o).data("uploading",!1),void 0!=a.uploadComplete&&jQuery.isFunction(a.uploadComplete)&&a.uploadComplete(l,-1)}}catch(e){$("#"+o).data("uploading",!1);var n="An error occurred while uploading.";throw g>0&&(n+=" Please ensure the file is less than "+g/1024+"kb."),void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)?(a.uploadError("",-1,n),e):(alert(n),e)}}),jQuery("input[name='file']",html).change(function(){var t=$(this),r=this;if(c=t.val(),""!=c){if(null!=n)try{if(!i(c,n.ValidationRegEx))return void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(c,SWFUpload.QUEUE_ERROR.INVALID_FILETYPE,n.ValidationMessage),void t.val("")}catch(e){return}var l=c,c=c.replace(/[^a-zA-Z0-9-_\.]/g,"");if(""==c||0==c.lastIndexOf("."))return void 0!=a.uploadError&&jQuery.isFunction(a.uploadError)&&a.uploadError(l,SWFUpload.QUEUE_ERROR.INVALID_FILETYPE,n.ValidationMessage),void t.val("");var u=e.GetMIMEtype(c),d=null,p=-1;try{r.files&&r.files.length>0&&(p=r.files[0].size)}catch(e){}if(void 0!=a.beforeUpload&&jQuery.isFunction(a.beforeUpload)&&0==a.beforeUpload(c,u,p,d)){try{t.val("")}catch(e){}return}$("#"+o).data("uploading",!0),$("#"+s+" input[name='Content-Type']").val(u);var v=jQuery("#"+s);t.hide(),v.submit();try{t.val("")}catch(e){}}})}1!=e._liveAttachmentRemoveHandlerBound&&(e._liveAttachmentRemoveHandlerBound=!0,jQuery("form a.UploadedFileRemove").live("click",function(){if(confirm("Do you wish to delete this file?\n\nYou will not be able to recover this file, and any links to it will be broken")){var a=jQuery(this).parents("form").data("associatedFieldID"),t=jQuery(this).parent("span.UploadedFileContainer");t.html("Deleting file...");var i=jQuery("#"+a).val();e.DeleteFile(i,function(e){0!=e.ResponseType?t.html("An error occurred: "+e.Message):(t.html(""),jQuery("#"+a).val(""))})}}))},e._liveAttachmentRemoveHandlerBound=!1;var u=null;e.GetAuthCookieName=function(){return null==u&&(u="UGC_AUTH_"+e.APIAccessKey),u},e.SetAuthCookieName=function(e){return u=e},e.Logout=function(a){var t=e.GetAuthCookieName();null!=a&&(t+=a);var i=Date.today().addMonths(-1),o=null;Agility.SetCookie(t,o,i,"/",null,!0)},e.Authenticate=function(t,i,r,n,s,c){if(void 0==c&&void 0!=s&&$.isFunction(s)&&(c=s,s=""),void 0==c&&void 0!=n&&$.isFunction(n)&&(c=n,n=!1),void 0==s&&(s=""),a(c)){var u=new Array;u.push(t);var d=(Agility.JSON.encode(t),o("Authenticate",u));d+="&l="+escape(i)+"&p="+escape(r)+"&fn="+escape(s),$.getJSON(d,function(a){if(!l(a,c)&&void 0!=a){var i=a.ResponseData;if(void 0!=i&&null!=i&&""!=i){var o=e.GetAuthCookieName();null!=t&&(o+=t);var r=new String(i),s=null;n&&(s=Date.today().addMonths(1)),Agility.SetCookie(o,r,s,"/",null,!1)}c({ResponseType:e.ResponseType.OK,ResponseData:i,Message:null})}})}},e.IsAuthenticated=function(t,i){var r=e.GetAuthCookieName();null!=t&&(r+=t);var n=Agility.GetCookie(r);if(null==n||""==n)return void i({ResponseType:e.ResponseType.OK,ResponseData:!1,Message:null});if(a(i)){var l=new Array;l.push(t);var s=o("IsAuthenticated",l);s+="&s="+escape(n),$.getJSON(s,function(a){if(void 0!=a&&void 0!=a.ResponseData&&null!=a.ResponseData){var t=a.ResponseData.ProfileRecordID,o=a.ResponseData.Seconds,r=a.ResponseData.RandomNumber,n=a.ResponseData.AccessHash,l=a.ResponseData.AccessKey;e.APIAccessKey=l,e.APISeconds=o,e.APIRandomNumber=r,e.APIProfileRecordID=t,e.APIHash=n,i({ResponseType:e.ResponseType.OK,ResponseData:t,Message:null})}})}},e.ChangePassword=function(t,i,r){if(e.APIProfileRecordID<1)return void r({ResponseType:e.ResponseType.Error,ResponseData:!1,Message:"The user is not currently logged in."});if(a(r)){var n=new Array,l=o("ChangePassword",n);l+="&c="+escape(t),l+="&n="+escape(i),$.getJSON(l,function(e){r(e)})}},e.RetrievePassword=function(t,i,r){if(a(r)){var n=new Array;
n.push(t);var l=o("RetrievePassword",n);l+="&l="+escape(i),$.getJSON(l,function(a){void 0!=a&&void 0!=a.ResponseData&&null!=a.ResponseData&&r({ResponseType:e.ResponseType.OK,ResponseData:a.ResponseData,Message:null})})}},e.GetODataMetaData=function(a){var t=n();t+="/?$format=json&$callback=?",$.getJSON(t,function(t){if(void 0!=t&&void 0!=t.d&&null!=t.d){if(l(t,a))return;void 0!=t.d&&null!=t.d&&a({ResponseType:e.ResponseType.OK,Message:null,ResponseData:t.d})}})},e.GetODataFeed=function(a,t,i){var o=n();o+="/"+a+"/",o+="?$format=json",void 0!=t&&null!=t&&void 0!=t.filter&&null!=t.filter&&""!=t.filter&&(o+="&$filter="+escape(t.filter)),o+="&$callback=?",$.getJSON(o,function(a){l(a,i)||void 0!=a&&null!=a&&void 0!=a.d&&null!=a.d&&void 0!=a.d.results&&null!=a.d.results&&i({ResponseType:e.ResponseType.OK,Message:null,ResponseData:a.d.results})})},e.GetODataRecord=function(a,t,i){var o=n();o+="/"+a+"("+t+")/",o+="?$format=json&$callback=?",$.getJSON(o,function(a){l(a,i)||void 0!=a&&null!=a&&void 0!=a.d&&null!=a.d&&i({ResponseType:e.ResponseType.OK,Message:null,ResponseData:a.d})})},e.ExecCustomProcedure=function(a,t,i){var o=Agility.UGC.API.APIUrl;if(o=o.toLowerCase().replace("agility-ugc-api-jsonp.svc","ExecCustomProcedure.ashx"),o+="?proc="+escape(a),void 0!=t&&null!=t)for(var r in t){var n=t[r];void 0!=n&&null!=n&&(o+="&@"+escape(r)+"="+escape(t[r]))}o+="&method=?",o+="&format=json",o+="&accessKey="+escape(e.APIAccessKey),o+="&seconds="+escape(e.APISeconds),o+="&randomNumber="+escape(e.APIRandomNumber),o+="&hash="+escape(e.APIHash),o+="&profileRecordID="+escape(e.APIProfileRecordID),$.getJSON(o,function(a){if(void 0!=a){var t={ResponseType:e.ResponseType.OK,Message:null};void 0!=a.ResonseData?t.ResponseData=a.ResonseData:t.ResponseData=a.ResponseData,i(t)}})},e.GetMIMEtype=function(e){var a=new String(e),t=new String;return t=a.match(/[\/\\][^\/\\]*$/),null!=t&&t.length>0&&(a=t+""),a=a.toLowerCase(),a.search(/^.*\.ai$/)>=0?"application/illustrator":a.search(/^.*\.bin$/)>=0?"application/octet-stream":a.search(/^.*\.pdf$/)>=0?"application/pdf":a.search(/^.*\.ps$/)>=0?"application/postscript":a.search(/^.*\.rtf$/)>=0?"application/rtf":a.search(/^.*\.sit$/)>=0?"application/stuffit":a.search(/^.*\.flv$/)>=0?"video/x-flv":a.search(/^.*\.mdb$/)>=0?"application/vnd.ms-access":a.search(/^.*\.xls$/)>=0?"application/vnd.ms-excel":a.search(/^.*\.ppt$/)>=0?"application/vnd.ms-powerpoint":a.search(/^.*\.pps$/)>=0?"application/vnd.ms-powerpoint":a.search(/^.*\.pot$/)>=0?"application/vnd.ms-powerpoint":a.search(/^.*\.xps$/)>=0?"application/vnd.ms-xpsdocument":a.search(/^.*\.doc$/)>=0?"application/msword":a.search(/^.*\.7z$/)>=0?"application/x-7z-compressed":a.search(/^.*\.torrent$/)>=0?"application/x-bittorrent":a.search(/^.*\.tar\.gz$/)>=0?"application/x-compressed-tar":a.search(/^.*\.tgz$/)>=0?"application/x-compressed-tar":a.search(/^.*\.ttf$/)>=0?"application/x-font-ttf":a.search(/^.*\.gz$/)>=0?"application/x-gzip":a.search(/^.*\.pdf\.gz$/)>=0?"application/x-gzpdf":a.search(/^.*\.ps\.gz$/)>=0?"application/x-gzpostscript":a.search(/^.*\.jar$/)>=0?"application/x-java-archive":a.search(/^.*\.js$/)>=0?"application/javascript":a.search(/^.*\.lzh$/)>=0?"application/x-lha":a.search(/^.*\.mkv$/)>=0?"video/x-matroska":a.search(/^.*\.exe$/)>=0?"application/x-ms-dos-executable":a.search(/^.*\.ogg$/)>=0?"application/ogg":a.search(/^.*\.ogx$/)>=0?"application/ogg":a.search(/^.*\.oga$/)>=0?"audio/ogg":a.search(/^.*\.ogv$/)>=0?"video/ogg":a.search(/^.*\.ogg$/)>=0?"audio/x-vorbis+ogg":a.search(/^.*\.ogg$/)>=0?"audio/x-flac+ogg":a.search(/^.*\.ogg$/)>=0?"audio/x-speex+ogg":a.search(/^.*\.spx$/)>=0?"audio/x-speex":a.search(/^.*\.ogg$/)>=0?"video/x-theora+ogg":a.search(/^.*\.ogm$/)>=0?"video/x-ogm+ogg":a.search(/^.*\.qtl$/)>=0?"application/x-quicktime-media-link":a.search(/^.*\.tar$/)>=0?"application/x-tar":a.search(/^.*\.theme$/)>=0?"application/x-theme":a.search(/^.*\.der$/)>=0?"application/x-x509-ca-cert":a.search(/^.*\.cer$/)>=0?"application/x-x509-ca-cert":a.search(/^.*\.crt$/)>=0?"application/x-x509-ca-cert":a.search(/^.*\.cert$/)>=0?"application/x-x509-ca-cert":a.search(/^.*\.pem$/)>=0?"application/x-x509-ca-cert":a.search(/^.*\.xhtml$/)>=0?"application/xhtml+xml":a.search(/^.*\.zip$/)>=0?"application/zip":a.search(/^.*\.ac3$/)>=0?"audio/ac3":a.search(/^.*\.aiff$/)>=0?"audio/x-aiff":a.search(/^.*\.aif$/)>=0?"audio/x-aiff":a.search(/^.*\.aifc$/)>=0?"audio/x-aiff":a.search(/^.*\.flac$/)>=0?"audio/x-flac":a.search(/^.*\.mid$/)>=0?"audio/midi":a.search(/^.*\.midi$/)>=0?"audio/midi":a.search(/^.*\.kar$/)>=0?"audio/midi":a.search(/^.*\.m4a$/)>=0?"audio/mp4":a.search(/^.*\.aac$/)>=0?"audio/mp4":a.search(/^.*\.mp4$/)>=0?"video/mp4":a.search(/^.*\.m4v$/)>=0?"video/mp4":a.search(/^.*\.m4b$/)>=0?"audio/x-m4b":a.search(/^.*\.3gp$/)>=0?"video/3gpp":a.search(/^.*\.3gpp$/)>=0?"video/3gpp":a.search(/^.*\.amr$/)>=0?"video/3gpp":a.search(/^.*\.mp2$/)>=0?"audio/mp2":a.search(/^.*\.mp3$/)>=0?"audio/mpeg":a.search(/^.*\.mpga$/)>=0?"audio/mpeg":a.search(/^.*\.m3u$/)>=0?"audio/x-mpegurl":a.search(/^.*\.vlc$/)>=0?"audio/x-mpegurl":a.search(/^.*\.asx$/)>=0?"audio/x-ms-asx":a.search(/^.*\.wax$/)>=0?"audio/x-ms-asx":a.search(/^.*\.wvx$/)>=0?"audio/x-ms-asx":a.search(/^.*\.wmx$/)>=0?"audio/x-ms-asx":a.search(/^.*\.psf$/)>=0?"audio/x-psf":a.search(/^.*\.wma$/)>=0?"audio/x-ms-wma":a.search(/^.*\.ra$/)>=0?"audio/vnd.rn-realaudio":a.search(/^.*\.rax$/)>=0?"audio/vnd.rn-realaudio":a.search(/^.*\.ram$/)>=0?"application/ram":a.search(/^.*\.rv$/)>=0?"video/vnd.rn-realvideo":a.search(/^.*\.rvx$/)>=0?"video/vnd.rn-realvideo":a.search(/^.*\.wav$/)>=0?"audio/x-wav":a.search(/^.*\.bmp$/)>=0?"image/bmp":a.search(/^.*\.wbmp$/)>=0?"image/vnd.wap.wbmp":a.search(/^.*\.gif$/)>=0?"image/gif":a.search(/^.*\.jpeg$/)>=0?"image/jpeg":a.search(/^.*\.jpg$/)>=0?"image/jpeg":a.search(/^.*\.jpe$/)>=0?"image/jpeg":a.search(/^.*\.png$/)>=0?"image/png":a.search(/^.*\.rle$/)>=0?"image/rle":a.search(/^.*\.svg$/)>=0?"image/svg+xml":a.search(/^.*\.svgz$/)>=0?"image/svg+xml-compressed":a.search(/^.*\.tif$/)>=0?"image/tiff":a.search(/^.*\.tiff$/)>=0?"image/tiff":a.search(/^.*\.eps$/)>=0?"image/x-eps":a.search(/^.*\.ico$/)>=0?"image/x-ico":a.search(/^.*\.psd$/)>=0?"image/x-psd":a.search(/^.*\.vcs$/)>=0?"text/calendar":a.search(/^.*\.ics$/)>=0?"text/calendar":a.search(/^.*\.css$/)>=0?"text/css":a.search(/^.*\.CSSL$/)>=0?"text/css":a.search(/^.*\.rtx$/)>=0?"text/richtext":a.search(/^.*\.rss$/)>=0?"application/rss+xml":a.search(/^.*\.atom$/)>=0?"application/atom+xml":a.search(/^.*\.opml$/)>=0?"text/x-opml+xml":a.search(/^.*\.sgml$/)>=0?"text/sgml":a.search(/^.*\.sgm$/)>=0?"text/sgml":a.search(/^.*\.dtd$/)>=0?"text/x-dtd":a.search(/^.*\.html$/)>=0?"text/html":a.search(/^.*\.htm$/)>=0?"text/html":a.search(/^.*\.log$/)>=0?"text/x-log":a.search(/^README*$/)>=0?"text/x-readme":a.search(/^.*\.uri$/)>=0?"text/x-uri":a.search(/^.*\.url$/)>=0?"text/x-uri":a.search(/^.*\.fo$/)>=0?"text/x-xslfo":a.search(/^.*\.xslfo$/)>=0?"text/x-xslfo":a.search(/^.*\.xml$/)>=0?"application/xml":a.search(/^.*\.xsl$/)>=0?"application/xml":a.search(/^.*\.xslt$/)>=0?"application/xml":a.search(/^.*\.xbl$/)>=0?"application/xml":a.search(/^.*\.mpeg$/)>=0?"video/mpeg":a.search(/^.*\.mpg$/)>=0?"video/mpeg":a.search(/^.*\.mp2$/)>=0?"video/mpeg":a.search(/^.*\.mpe$/)>=0?"video/mpeg":a.search(/^.*\.vob$/)>=0?"video/mpeg":a.search(/^.*\.m2t$/)>=0?"video/mpeg":a.search(/^.*\.qt$/)>=0?"video/quicktime":a.search(/^.*\.mov$/)>=0?"video/quicktime":a.search(/^.*\.moov$/)>=0?"video/quicktime":a.search(/^.*\.qtvr$/)>=0?"video/quicktime":a.search(/^.*\.qtif$/)>=0?"image/x-quicktime":a.search(/^.*\.qif$/)>=0?"image/x-quicktime":a.search(/^.*\.viv$/)>=0?"video/vivo":a.search(/^.*\.vivo$/)>=0?"video/vivo":a.search(/^.*\.anim[1-9j]$/)>=0?"video/x-anim":a.search(/^.*\.fli$/)>=0?"video/x-flic":a.search(/^.*\.flc$/)>=0?"video/x-flic":a.search(/^.*\.hwp$/)>=0?"application/x-hwp":a.search(/^.*\.hwt$/)>=0?"application/x-hwt":a.search(/^.*\.mng$/)>=0?"video/x-mng":a.search(/^.*\.asf$/)>=0?"video/x-ms-asf":a.search(/^.*\.nsc$/)>=0?"application/x-netshow-channel":a.search(/^.*\.wmv$/)>=0?"video/x-ms-wmv":a.search(/^.*\.avi$/)>=0?"video/x-msvideo":a.search(/^.*\.divx$/)>=0?"video/x-msvideo":"binary/octet-stream"}}(Agility.UGC.API);